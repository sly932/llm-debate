<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLMè¾©è®ºå¯è§†åŒ–</title>
    <!-- å¯¼å…¥ç§‘å¹»é£æ ¼å­—ä½“ï¼šOrbitronç”¨äºæ ‡é¢˜ï¼ŒRobotoç”¨äºæ­£æ–‡ -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /* CSSå˜é‡å®šä¹‰ï¼šç”¨äºç»Ÿä¸€ç®¡ç†é¢œè‰²å’Œæ•ˆæœï¼Œä¾¿äºå…¨å±€ä¿®æ”¹ */
        :root {
            --primary-color: #00f0ff;      /* ä¸»è‰²è°ƒï¼šé’è‰² */
            --secondary-color: #ff00e6;    /* è¾…åŠ©è‰²ï¼šå“çº¢è‰² */
            --bg-color: #0a0a1a;           /* èƒŒæ™¯è‰²ï¼šæ·±è“é»‘è‰² */
            --panel-color: rgba(16, 18, 35, 0.85); /* é¢æ¿èƒŒæ™¯è‰²ï¼šåŠé€æ˜ */
            --text-color: #e0e0ff;         /* æ–‡æœ¬é¢œè‰²ï¼šæµ…è“ç™½è‰² */
            --highlight-color: #00f0ff;    /* é«˜äº®è‰²ï¼šä¸ä¸»è‰²ç›¸åŒ */
            --role1-color: #00c8ff;        /* è§’è‰²1(æ­£æ–¹)é¢œè‰² */
            --role2-color: #ff00c8;        /* è§’è‰²2(åæ–¹)é¢œè‰² */
            /* éœ“è™¹å‘å…‰æ•ˆæœï¼šå¤šå±‚é˜´å½±å åŠ  */
            --glow: 0 0 10px var(--primary-color), 0 0 20px rgba(0, 240, 255, 0.5);
        }

        /* é‡ç½®æ‰€æœ‰å…ƒç´ çš„é»˜è®¤æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* é¡µé¢èƒŒæ™¯è®¾ç½® */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            /* åˆ›å»ºä¸¤ä¸ªå¾„å‘æ¸å˜ä½œä¸ºèƒŒæ™¯ç‚¹ç¼€ï¼Œå¢åŠ ç§‘å¹»æ„Ÿ */
            background-image:
                radial-gradient(circle at 20% 30%, rgba(0, 240, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 230, 0.1) 0%, transparent 20%);
        }

        /* ä¸»å®¹å™¨æ ·å¼ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* é¡µå¤´æ ·å¼ */
        header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        /* æ ‡é¢˜æ ·å¼ï¼šä½¿ç”¨æ¸å˜è‰²å’Œæ–‡å­—å‘å…‰æ•ˆæœ */
        h1 {
            font-family: 'Orbitron', sans-serif; /* ç§‘å¹»å­—ä½“ */
            font-size: 2.5rem;
            margin-bottom: 1rem;
            /* æ–‡å­—æ¸å˜æ•ˆæœ */
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;  /* ä½¿æ¸å˜ä»…åº”ç”¨äºæ–‡å­— */
            background-clip: text;
            color: transparent;             /* ä½¿åŸå§‹æ–‡å­—é¢œè‰²é€æ˜ï¼Œæ˜¾ç¤ºèƒŒæ™¯æ¸å˜ */
            text-shadow: 0 0 15px rgba(0, 240, 255, 0.5); /* æ–‡å­—å‘å…‰æ•ˆæœ */
            letter-spacing: 2px;            /* å­—é—´è·å¢åŠ ï¼Œæé«˜å¯è¯»æ€§ */
        }

        /* ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .upload-section {
            background: var(--panel-color);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 240, 255, 0.3); /* åŠé€æ˜è¾¹æ¡† */
            box-shadow: var(--glow);                  /* éœ“è™¹å‘å…‰æ•ˆæœ */
            backdrop-filter: blur(10px);              /* èƒŒæ™¯æ¨¡ç³Šæ•ˆæœï¼Œå¢åŠ æ·±åº¦æ„Ÿ */
            transition: all 0.3s ease;                /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
        }

        /* ä¸Šä¼ åŒºåŸŸæ‚¬åœæ•ˆæœï¼šå¢å¼ºå‘å…‰ */
        .upload-section:hover {
            box-shadow: 0 0 15px var(--primary-color), 0 0 30px rgba(0, 240, 255, 0.3);
        }

        /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .file-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed rgba(0, 240, 255, 0.5); /* è™šçº¿è¾¹æ¡† */
            border-radius: 10px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden; /* éšè—æº¢å‡ºçš„åŠ¨ç”»æ•ˆæœ */
        }

        /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸæ‚¬åœæ•ˆæœ */
        .file-upload:hover {
            border-color: var(--primary-color);
            background: rgba(0, 240, 255, 0.05);
        }

        /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸçš„å…‰æ•ˆåŠ¨ç”» - ä½¿ç”¨ä¼ªå…ƒç´ åˆ›å»ºæ‰«å…‰æ•ˆæœ */
        .file-upload::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(0, 240, 255, 0.1),
                transparent
            );
            transform: rotate(45deg);
            animation: shine 3s infinite; /* åº”ç”¨æ‰«å…‰åŠ¨ç”» */
        }

        /* æ‰«å…‰åŠ¨ç”»å®šä¹‰ - ä»å·¦åˆ°å³æ‰«è¿‡ */
        @keyframes shine {
            0% {
                transform: translateX(-100%) rotate(45deg);
            }
            100% {
                transform: translateX(100%) rotate(45deg);
            }
        }

        /* éšè—åŸç”Ÿæ–‡ä»¶è¾“å…¥æ¡†ï¼Œä½†ä¿æŒå…¶åŠŸèƒ½ */
        .file-upload input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        /* ä¸Šä¼ å›¾æ ‡æ ·å¼ */
        .file-upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        /* ä¸Šä¼ æ–‡æœ¬æç¤ºæ ·å¼ */
        .file-upload-text {
            font-size: 1.2rem;
            text-align: center;
        }

        /* å¯è§†åŒ–åŒºåŸŸæ ·å¼ - åˆå§‹éšè—ï¼Œä¸Šä¼ æ–‡ä»¶åæ˜¾ç¤º */
        .visualization-section {
            display: none;
            background: var(--panel-color);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(0, 240, 255, 0.3);
            box-shadow: var(--glow);
            backdrop-filter: blur(10px);
        }

        /* è¾©è®ºä¿¡æ¯ç½‘æ ¼å¸ƒå±€ */
        .debate-info {
            display: grid;
            grid-template-columns: 1fr 1fr; /* ä¸¤åˆ—å¸ƒå±€ */
            gap: 2rem;
            margin-bottom: 2rem;
        }

        /* ä¿¡æ¯å¡ç‰‡æ ·å¼ */
        .info-card {
            background: rgba(10, 10, 26, 0.7);
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 240, 255, 0.2);
            transition: all 0.3s ease;
        }

        /* ä¿¡æ¯å¡ç‰‡æ‚¬åœæ•ˆæœ */
        .info-card:hover {
            box-shadow: 0 0 10px rgba(0, 240, 255, 0.3);
        }

        /* ä¿¡æ¯å¡ç‰‡æ ‡é¢˜æ ·å¼ */
        .info-card h3 {
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 1rem;
            color: var(--highlight-color);
            font-size: 1.3rem;
        }

        /* ä¿¡æ¯å¡ç‰‡å†…å®¹æ ·å¼ */
        .info-card p {
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* è¾©è®ºå†å²åŒºåŸŸæ ·å¼ */
        .debate-history {
            margin-top: 3rem;
        }

        /* è¾©è®ºå†å²æ ‡é¢˜æ ·å¼ */
        .debate-history h2 {
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 2rem;
            text-align: center;
            font-size: 1.8rem;
            color: var(--highlight-color);
        }

        /* èŠå¤©å®¹å™¨æ ·å¼ - ä½¿ç”¨flexå¸ƒå±€å‚ç›´æ’åˆ—æ¶ˆæ¯ */
        .chat-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-height:1000px;
            overflow-y: auto; /* å†…å®¹è¿‡å¤šæ—¶å¯æ»šåŠ¨ */
            padding: 1rem;
            border-radius: 10px;
            background: rgba(10, 10, 26, 0.5);
            border: 1px solid rgba(0, 240, 255, 0.2);
            /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--bg-color);
        }

        /* Webkitæµè§ˆå™¨çš„æ»šåŠ¨æ¡æ ·å¼ */
        .chat-container::-webkit-scrollbar {
            width: 8px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: rgba(10, 10, 26, 0.5);
            border-radius: 10px;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        /* æ¶ˆæ¯æ ·å¼ */
        .message {
            display: flex;
            flex-direction: column;
            max-width: 80%;
            animation: fadeIn 0.5s ease-out; /* æ¶ˆæ¯æ·¡å…¥åŠ¨ç”» */
        }

        /* æ¶ˆæ¯æ·¡å…¥åŠ¨ç”»å®šä¹‰ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* è§’è‰²1(æ­£æ–¹)æ¶ˆæ¯ä½ç½® - é å·¦ */
        .message.role1 {
            align-self: flex-start;
        }

        /* è§’è‰²2(åæ–¹)æ¶ˆæ¯ä½ç½® - é å³ */
        .message.role2 {
            align-self: flex-end;
        }

        /* æ¶ˆæ¯å¤´éƒ¨æ ·å¼ */
        .message-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            font-family: 'Orbitron', sans-serif;
        }

        /* è§’è‰²1(æ­£æ–¹)æ¶ˆæ¯å¤´éƒ¨é¢œè‰² */
        .message.role1 .message-header {
            color: var(--role1-color);
        }

        /* è§’è‰²2(åæ–¹)æ¶ˆæ¯å¤´éƒ¨é¢œè‰² */
        .message.role2 .message-header {
            color: var(--role2-color);
        }

        /* å¤´åƒæ ·å¼ */
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* è§’è‰²1(æ­£æ–¹)å¤´åƒæ ·å¼ - è“è‰²ç³» */
        .message.role1 .avatar {
            background: linear-gradient(135deg, rgba(0, 200, 255, 0.2), rgba(0, 200, 255, 0.5));
            border: 2px solid var(--role1-color);
            box-shadow: 0 0 10px rgba(0, 200, 255, 0.5); /* å¤´åƒå‘å…‰æ•ˆæœ */
        }

        /* è§’è‰²2(åæ–¹)å¤´åƒæ ·å¼ - ç²‰è‰²ç³» */
        .message.role2 .avatar {
            background: linear-gradient(135deg, rgba(255, 0, 200, 0.2), rgba(255, 0, 200, 0.5));
            border: 2px solid var(--role2-color);
            box-shadow: 0 0 10px rgba(255, 0, 200, 0.5); /* å¤´åƒå‘å…‰æ•ˆæœ */
        }

        /* æ¶ˆæ¯å†…å®¹æ ·å¼ */
        .message-content {
            padding: 1rem;
            border-radius: 10px;
            line-height: 1.6;
            font-size: 1rem;
            white-space: pre-wrap; /* ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ */
        }

        /* è§’è‰²1(æ­£æ–¹)æ¶ˆæ¯å†…å®¹æ ·å¼ */
        .message.role1 .message-content {
            background: linear-gradient(135deg, rgba(0, 200, 255, 0.1), rgba(0, 200, 255, 0.2));
            border: 1px solid rgba(0, 200, 255, 0.3);
            border-top-left-radius: 0; /* åˆ›å»ºå¯¹è¯æ°”æ³¡æ•ˆæœ */
        }

        /* è§’è‰²2(åæ–¹)æ¶ˆæ¯å†…å®¹æ ·å¼ */
        .message.role2 .message-content {
            background: linear-gradient(135deg, rgba(255, 0, 200, 0.1), rgba(255, 0, 200, 0.2));
            border: 1px solid rgba(255, 0, 200, 0.3);
            border-top-right-radius: 0; /* åˆ›å»ºå¯¹è¯æ°”æ³¡æ•ˆæœ */
            text-align: right;
        }

        /* åŠ è½½åŠ¨ç”»å®¹å™¨ - åˆå§‹éšè— */
        .loading {
            display: none;
            text-align: center;
            margin: 2rem 0;
        }

        /* åŠ è½½æ—‹è½¬åŠ¨ç”» */
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 240, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color); /* é¡¶éƒ¨è¾¹æ¡†ä½¿ç”¨ä¸»è‰² */
            animation: spin 1s ease-in-out infinite; /* åº”ç”¨æ—‹è½¬åŠ¨ç”» */
            margin: 0 auto 1rem;
        }

        /* æ—‹è½¬åŠ¨ç”»å®šä¹‰ */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* å…¨æ¯æ•ˆæœ - ä½¿ç”¨æ¸å˜èƒŒæ™¯å’ŒåŠ¨ç”»åˆ›å»ºå…¨æ¯æ„Ÿ */
        .holographic-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* åˆ›å»º45åº¦è§’çš„æ¸å˜ï¼Œé¢œè‰²åœ¨é€æ˜å’ŒåŠé€æ˜ä¹‹é—´å˜åŒ– */
            background: linear-gradient(45deg,
                rgba(0, 240, 255, 0) 0%,
                rgba(0, 240, 255, 0.05) 25%,
                rgba(0, 240, 255, 0) 50%,
                rgba(255, 0, 230, 0.05) 75%,
                rgba(255, 0, 230, 0) 100%);
            background-size: 200% 200%; /* èƒŒæ™¯å°ºå¯¸æ”¾å¤§ï¼Œä½¿åŠ¨ç”»æ›´æ˜æ˜¾ */
            animation: holographic 15s linear infinite; /* åº”ç”¨å…¨æ¯åŠ¨ç”» */
            pointer-events: none; /* ä¸å½±å“é¼ æ ‡äº‹ä»¶ */
            z-index: -1; /* ç½®äºå†…å®¹åé¢ */
        }

        /* å…¨æ¯åŠ¨ç”»å®šä¹‰ - èƒŒæ™¯ä½ç½®ç§»åŠ¨åˆ›é€ å…‰æ•ˆå˜åŒ– */
        @keyframes holographic {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 200%; }
        }

        /* ç²’å­å®¹å™¨ - ç”¨äºåˆ›å»ºæµ®åŠ¨ç²’å­æ•ˆæœ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* ç½®äºå…¨æ¯æ•ˆæœåé¢ */
            overflow: hidden;
        }

        /* å•ä¸ªç²’å­æ ·å¼ */
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--primary-color); /* ç²’å­å‘å…‰æ•ˆæœ */
            animation: float 20s linear infinite; /* åº”ç”¨æµ®åŠ¨åŠ¨ç”» */
        }

        /* ç²’å­æµ®åŠ¨åŠ¨ç”»å®šä¹‰ - ä»åº•éƒ¨å‘ä¸Šé£˜åŠ¨ */
        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        /* é”™è¯¯æ¶ˆæ¯æ ·å¼ - åˆå§‹éšè— */
        .error-message {
            display: none;
            background-color: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6b6b;
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            text-align: center;
        }

        /* æ§åˆ¶æŒ‰é’®åŒºåŸŸæ ·å¼ */
        .controls {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
            gap: 1rem;
        }

        /* æŒ‰é’®åŸºç¡€æ ·å¼ */
        .btn {
            font-family: 'Orbitron', sans-serif;
            background: transparent;
            color: var(--text-color);
            border: 2px solid var(--primary-color);
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden; /* éšè—æº¢å‡ºçš„å¡«å……åŠ¨ç”» */
            z-index: 1;
        }

        /* æŒ‰é’®å¡«å……åŠ¨ç”» - ä½¿ç”¨ä¼ªå…ƒç´ åˆ›å»ºå¡«å……æ•ˆæœ */
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: all 0.3s ease;
            z-index: -1;
        }

        /* æŒ‰é’®æ‚¬åœæ—¶å¡«å……æ•ˆæœ */
        .btn:hover::before {
            width: 100%;
        }

        /* æŒ‰é’®æ‚¬åœæ ·å¼ */
        .btn:hover {
            color: var(--bg-color);
            box-shadow: 0 0 15px var(--primary-color);
        }

        /* é‡ç½®æŒ‰é’®ç‰¹æ®Šæ ·å¼ */
        .btn-reset {
            border-color: var(--secondary-color);
        }

        /* é‡ç½®æŒ‰é’®å¡«å……æ•ˆæœ - é¢œè‰²é¡ºåºç›¸å */
        .btn-reset::before {
            background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
        }

        /* å“åº”å¼è®¾è®¡ - é€‚é…ç§»åŠ¨è®¾å¤‡ */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .debate-info {
                grid-template-columns: 1fr; /* å•åˆ—å¸ƒå±€ */
            }

            .message {
                max-width: 90%;
            }

            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- ç²’å­æ•ˆæœå®¹å™¨ - åˆ›å»ºèƒŒæ™¯æµ®åŠ¨ç²’å­ -->
    <div class="particles" id="particles"></div>
    <!-- å…¨æ¯æ•ˆæœå±‚ - åˆ›å»ºæ•´ä½“çš„å…¨æ¯å…‰æ•ˆ -->
    <div class="holographic-effect"></div>
    <!-- ä¸»å†…å®¹å®¹å™¨ -->
    <div class="container">
        <header>
            <h1>LLMè¾©è®ºå¯è§†åŒ–ç³»ç»Ÿ</h1>
        </header>

        <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ - åˆå§‹æ˜¾ç¤º -->
        <div class="upload-section" id="uploadSection">
            <div class="file-upload" id="fileUpload">
                <input type="file" id="jsonFileInput" accept=".json">
                <div class="file-upload-icon">ğŸ“¤</div>
                <div class="file-upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ JSONæ–‡ä»¶</div>
            </div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <!-- åŠ è½½åŠ¨ç”» - åˆå§‹éšè—ï¼Œä¸Šä¼ æ–‡ä»¶æ—¶æ˜¾ç¤º -->
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>æ­£åœ¨å¤„ç†æ•°æ®...</p>
        </div>

        <!-- å¯è§†åŒ–åŒºåŸŸ - åˆå§‹éšè—ï¼Œæ•°æ®å¤„ç†å®Œæˆåæ˜¾ç¤º -->
        <div class="visualization-section" id="visualizationSection">
            <!-- è¾©è®ºåŸºæœ¬ä¿¡æ¯åŒºåŸŸ -->
            <div class="debate-info" id="debateInfo">
                <!-- è¾©è®ºä¿¡æ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- è¾©è®ºå†å²è®°å½•åŒºåŸŸ -->
            <div class="debate-history">
                <h2>è¾©è®ºå†å²</h2>
                <div class="chat-container" id="chatContainer">
                    <!-- è¾©è®ºå†å²å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- æ§åˆ¶æŒ‰é’®åŒºåŸŸ -->
            <div class="controls">
                <button class="btn btn-reset" id="resetBtn">é‡ç½®</button>
            </div>
        </div>
    </div>

    <script>
        // åˆ›å»ºç²’å­æ•ˆæœ
        // è¿™ä¸ªå‡½æ•°åœ¨é¡µé¢åŠ è½½æ—¶åˆ›å»ºå¤šä¸ªéšæœºä½ç½®ã€å¤§å°å’Œé¢œè‰²çš„ç²’å­ï¼Œå½¢æˆèƒŒæ™¯åŠ¨ç”»æ•ˆæœ
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50; // ç²’å­æ€»æ•°
            for (let i = 0; i < particleCount; i++) {
                // åˆ›å»ºç²’å­DOMå…ƒç´ 
                const particle = document.createElement('div');
                particle.classList.add('particle');
                // éšæœºè®¾ç½®ç²’å­å±æ€§
                const x = Math.random() * 100;           // éšæœºæ°´å¹³ä½ç½®(0-100%)
                const delay = Math.random() * 20;        // éšæœºåŠ¨ç”»å»¶è¿Ÿ(0-20s)
                const size = Math.random() * 3 + 1;      // éšæœºå¤§å°(1-4px)
                const duration = Math.random() * 20 + 10; // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´(10-30s)
                // åº”ç”¨éšæœºæ ·å¼
                particle.style.left = `${x}%`;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                // éšæœºé€‰æ‹©ç²’å­é¢œè‰² - é’è‰²æˆ–å“çº¢è‰²
                if (Math.random() > 0.5) {
                    particle.style.backgroundColor = '#00f0ff'; // é’è‰²
                    particle.style.boxShadow = '0 0 10px #00f0ff';
                } else {
                    particle.style.backgroundColor = '#ff00e6'; // å“çº¢è‰²
                    particle.style.boxShadow = '0 0 10px #ff00e6';
                }
                // å°†ç²’å­æ·»åŠ åˆ°å®¹å™¨ä¸­
                particlesContainer.appendChild(particle);
            }
        }

        // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
        // è¿™ä¸ªå‡½æ•°è®¾ç½®æ–‡ä»¶ä¸Šä¼ é€»è¾‘ï¼ŒåŒ…æ‹¬æ–‡ä»¶éªŒè¯ã€è¯»å–å’Œé”™è¯¯å¤„ç†
        function handleFileUpload() {
            const fileInput = document.getElementById('jsonFileInput');
            const errorMessage = document.getElementById('errorMessage');
            const loading = document.getElementById('loading');
            const uploadSection = document.getElementById('uploadSection');
            const visualizationSection = document.getElementById('visualizationSection');
            // ç›‘å¬æ–‡ä»¶é€‰æ‹©å˜åŒ–äº‹ä»¶
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                // éªŒè¯æ–‡ä»¶ç±»å‹æ˜¯å¦ä¸ºJSON
                if (file.type !== 'application/json' && !file.name.endsWith('.json')) {
                    errorMessage.textContent = 'è¯·ä¸Šä¼ JSONæ–‡ä»¶';
                    errorMessage.style.display = 'block';
                    return;
                }
                // éšè—é”™è¯¯ä¿¡æ¯ï¼Œæ˜¾ç¤ºåŠ è½½åŠ¨ç”»
                errorMessage.style.display = 'none';
                loading.style.display = 'block';
                // åˆ›å»ºæ–‡ä»¶è¯»å–å™¨
                const reader = new FileReader();
                // æ–‡ä»¶è¯»å–å®Œæˆåçš„å¤„ç†
                reader.onload = function(event) {
                    try {
                        // è§£æJSONæ•°æ®
                        const data = JSON.parse(event.target.result);
                        // å¯è§†åŒ–æ•°æ®
                        visualizeData(data);
                        // åˆ‡æ¢æ˜¾ç¤ºï¼šéšè—ä¸Šä¼ åŒºåŸŸï¼Œæ˜¾ç¤ºå¯è§†åŒ–åŒºåŸŸ
                        uploadSection.style.display = 'none';
                        loading.style.display = 'none';
                        visualizationSection.style.display = 'block';
                    } catch (error) {
                        // JSONè§£æé”™è¯¯å¤„ç†
                        errorMessage.textContent = 'æ— æ³•è§£æJSONæ–‡ä»¶: ' + error.message;
                        errorMessage.style.display = 'block';
                        loading.style.display = 'none';
                    }
                };
                // æ–‡ä»¶è¯»å–é”™è¯¯å¤„ç†
                reader.onerror = function() {
                    errorMessage.textContent = 'è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯';
                    errorMessage.style.display = 'block';
                    loading.style.display = 'none';
                };
                // å¼€å§‹è¯»å–æ–‡ä»¶å†…å®¹
                reader.readAsText(file);
            });
        }

        // å¯è§†åŒ–æ•°æ®
        // è¿™ä¸ªå‡½æ•°å¤„ç†JSONæ•°æ®å¹¶åˆ›å»ºå¯è§†åŒ–å†…å®¹
        function visualizeData(data) {
            // åˆ›å»ºMarkdownè§£æå™¨å®ä¾‹
            const markdown = new SimpleMarkdown();

            // æ˜¾ç¤ºè¾©è®ºåŸºæœ¬ä¿¡æ¯ï¼ˆä¸»é¢˜å’ŒåŒæ–¹è§‚ç‚¹ï¼‰
            const debateInfo = document.getElementById('debateInfo');
            debateInfo.innerHTML = `
                <div class="info-card">
                    <h3>è¾©è®ºä¸»é¢˜</h3>
                    <p>${data.topic || 'æœªæä¾›'}</p>
                </div>
                <div class="info-card">
                    <h3>æ­£æ–¹è§‚ç‚¹</h3>
                    <p>${data.affirmative_argument || 'æœªæä¾›'}</p>
                </div>
                <div class="info-card">
                    <h3>åæ–¹è§‚ç‚¹</h3>
                    <p>${data.negative_argument || 'æœªæä¾›'}</p>
                </div>
            `;
            // æ˜¾ç¤ºè¾©è®ºå†å²è®°å½•
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = '';
            // æ£€æŸ¥æ˜¯å¦æœ‰è¾©è®ºå†å²æ•°æ®
            if (data.debate_history && data.debate_history.length > 0) {
                // è®¾ç½®æ¶ˆæ¯æ˜¾ç¤ºå»¶è¿Ÿï¼Œåˆ›å»ºæ‰“å­—æ•ˆæœ
                let messageDelay = 0;
                // éå†æ¯æ¡è¾©è®ºè®°å½•
                data.debate_history.forEach((entry, index) => {
                    // åˆ›å»ºæ¶ˆæ¯å…ƒç´ 
                    const messageElement = document.createElement('div');
                    messageElement.classList.add('message');
                    // æ ¹æ®è§’è‰²æ·»åŠ ä¸åŒçš„æ ·å¼ç±»
                    messageElement.classList.add(entry.role === 'role1' ? 'role1' : 'role2');
                    // è®¾ç½®è§’è‰²åç§°å’Œå¤´åƒå­—æ¯
                    const roleName = entry.role === 'role1' ? 'æ­£æ–¹' : 'åæ–¹';
                    const avatarLetter = entry.role === 'role1' ? 'A' : 'B';

                    // ä½¿ç”¨Markdownè§£æå™¨å¤„ç†æ¶ˆæ¯å†…å®¹
                    const parsedContent = markdown.parse(entry.msg);
                    // æ„å»ºæ¶ˆæ¯HTML
                    messageElement.innerHTML = `
                        <div class="message-header">
                            <div class="avatar">${avatarLetter}</div>
                            <div class="role-name">${roleName}</div>
                        </div>
                        <div class="message-content">${parsedContent}</div>
                    `;
                    // åˆå§‹è®¾ç½®ä¸ºä¸å¯è§
                    messageElement.style.opacity = '0';
                    // æ·»åŠ åˆ°èŠå¤©å®¹å™¨
                    chatContainer.appendChild(messageElement);
                    // å»¶è¿Ÿæ˜¾ç¤ºæ¯æ¡æ¶ˆæ¯ï¼Œåˆ›å»ºé¡ºåºå‡ºç°çš„æ•ˆæœ
                    setTimeout(() => {
                        messageElement.style.opacity = '1';
                        messageElement.style.animation = 'fadeIn 0.5s ease-out forwards';
                        // æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    }, messageDelay);
                    // æ¯æ¡æ¶ˆæ¯å¢åŠ 300mså»¶è¿Ÿ
                    messageDelay += 300;
                });
            } else {
                // æ²¡æœ‰è¾©è®ºå†å²æ•°æ®æ—¶æ˜¾ç¤ºæç¤º
                chatContainer.innerHTML = '<p style="text-align: center; padding: 2rem;">æ²¡æœ‰è¾©è®ºå†å²æ•°æ®</p>';
            }
        }

        // ç®€æ˜“Markdownè§£æå™¨ - ä¸ä¾èµ–å¤–éƒ¨åº“
        class SimpleMarkdown {
            constructor() {
                // å®šä¹‰Markdownè¯­æ³•çš„æ­£åˆ™è¡¨è¾¾å¼
                this.rules = [
                    // æ ‡é¢˜ (# æ ‡é¢˜)
                    { pattern: /^(#{1,6})\s+(.+)$/gm, replacement: (match, p1, p2) => `<h${p1.length}>${p2}</h${p1.length}>` },

                    // ç²—ä½“ (**æ–‡æœ¬** æˆ– __æ–‡æœ¬__)
                    { pattern: /\*\*(.+?)\*\*|__(.+?)__/g, replacement: (match, p1, p2) => `<strong>${p1 || p2}</strong>` },

                    // æ–œä½“ (*æ–‡æœ¬* æˆ– _æ–‡æœ¬_)
                    { pattern: /\*([^*]+)\*|_([^_]+)_/g, replacement: (match, p1, p2) => `<em>${p1 || p2}</em>` },

                    // ä»£ç å— (\`\`\`ä»£ç \`\`\`)
                    { pattern: /\`\`\`([\s\S]+?)\`\`\`/g, replacement: (match, p1) => `<pre><code>${this.escapeHtml(p1)}</code></pre>` },

                    // è¡Œå†…ä»£ç  (`ä»£ç `)
                    { pattern: /`([^`]+)`/g, replacement: (match, p1) => `<code>${this.escapeHtml(p1)}</code>` },

                    // é“¾æ¥ ([æ–‡æœ¬](URL))
                    { pattern: /\[([^\]]+)\]\(([^)]+)\)/g, replacement: (match, p1, p2) => `<a href="${p2}" target="_blank">${p1}</a>` },

                    // å›¾ç‰‡ (![æ›¿ä»£æ–‡æœ¬](URL))
                    { pattern: /!\[([^\]]*)\]\(([^)]+)\)/g, replacement: (match, p1, p2) => `<img src="${p2}" alt="${p1}" title="${p1}">` },

                    // å¼•ç”¨å— (> æ–‡æœ¬)
                    { pattern: /^>\s+(.+)$/gm, replacement: (match, p1) => `<blockquote>${p1}</blockquote>` },

                    // æ— åºåˆ—è¡¨ (- é¡¹ç›® æˆ– * é¡¹ç›®)
                    { pattern: /^[\*\-]\s+(.+)$/gm, replacement: (match, p1) => `<li>${p1}</li>` },

                    // æœ‰åºåˆ—è¡¨ (1. é¡¹ç›®)
                    { pattern: /^\d+\.\s+(.+)$/gm, replacement: (match, p1) => `<li>${p1}</li>` },

                    // æ°´å¹³çº¿ (--- æˆ– *** æˆ– ___)
                    { pattern: /^[\*\-_]{3,}$/gm, replacement: () => `<hr>` },

                    // æ®µè½ (æ™®é€šæ–‡æœ¬)
                    { pattern: /^(?!<[a-z]).+$/gm, replacement: (match) => match.trim() ? `<p>${match}</p>` : '' }
                ];
            }

            // è½¬ä¹‰HTMLç‰¹æ®Šå­—ç¬¦
            escapeHtml(text) {
                return text
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }

            // è§£æMarkdownæ–‡æœ¬
            parse(text) {
                if (!text) return '';

                // é¢„å¤„ç†ï¼šå¤„ç†æ¢è¡Œç¬¦
                let html = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');

                // åº”ç”¨æ‰€æœ‰è§„åˆ™
                this.rules.forEach(rule => {
                    html = html.replace(rule.pattern, rule.replacement);
                });

                // åå¤„ç†ï¼šå¤„ç†åˆ—è¡¨
                html = this.processList(html);

                return html;
            }

            // å¤„ç†åˆ—è¡¨ï¼ˆå°†è¿ç»­çš„<li>å…ƒç´ åŒ…è£…åœ¨<ul>æˆ–<ol>ä¸­ï¼‰
            processList(html) {
                // å¤„ç†æ— åºåˆ—è¡¨
                html = html.replace(/(<li>[\s\S]+?<\/li>)(?!\s*<li>)/g, '<ul>$1</ul>');

                // å¤„ç†æœ‰åºåˆ—è¡¨
                html = html.replace(/(<li>[\s\S]+?<\/li>)(?!\s*<li>)/g, '<ol>$1</ol>');

                return html;
            }
        }

        // è®¾ç½®é‡ç½®æŒ‰é’®åŠŸèƒ½
        // è¿™ä¸ªå‡½æ•°ä¸ºé‡ç½®æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œå…è®¸ç”¨æˆ·ä¸Šä¼ æ–°æ–‡ä»¶
        function setupResetButton() {
            const resetBtn = document.getElementById('resetBtn');
            const uploadSection = document.getElementById('uploadSection');
            const visualizationSection = document.getElementById('visualizationSection');
            const fileInput = document.getElementById('jsonFileInput');
            const errorMessage = document.getElementById('errorMessage');
            resetBtn.addEventListener('click', function() {
                // é‡ç½®æ–‡ä»¶è¾“å…¥
                fileInput.value = '';
                errorMessage.style.display = 'none';
                // åˆ‡æ¢æ˜¾ç¤ºï¼šéšè—å¯è§†åŒ–åŒºåŸŸï¼Œæ˜¾ç¤ºä¸Šä¼ åŒºåŸŸ
                visualizationSection.style.display = 'none';
                uploadSection.style.display = 'block';
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆ›å»ºèƒŒæ™¯ç²’å­æ•ˆæœ
            createParticles();
            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ å¤„ç†
            handleFileUpload();
            // è®¾ç½®é‡ç½®æŒ‰é’®åŠŸèƒ½
            setupResetButton();
            // è®¾ç½®æ‹–æ”¾åŠŸèƒ½
            const fileUpload = document.getElementById('fileUpload');
            // é˜»æ­¢é»˜è®¤æ‹–æ”¾è¡Œä¸º
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                fileUpload.addEventListener(eventName, preventDefaults, false);
            });
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            // æ‹–å…¥å’Œæ‹–è¿‡æ—¶é«˜äº®ä¸Šä¼ åŒºåŸŸ
            ['dragenter', 'dragover'].forEach(eventName => {
                fileUpload.addEventListener(eventName, highlight, false);
            });
            // æ‹–ç¦»å’Œæ”¾ä¸‹æ—¶å–æ¶ˆé«˜äº®
            ['dragleave', 'drop'].forEach(eventName => {
                fileUpload.addEventListener(eventName, unhighlight, false);
            });
            function highlight() {
                fileUpload.classList.add('highlight');
            }
            function unhighlight() {
                fileUpload.classList.remove('highlight');
            }
            // å¤„ç†æ–‡ä»¶æ”¾ä¸‹äº‹ä»¶
            fileUpload.addEventListener('drop', handleDrop, false);
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                if (files.length) {
                    // è®¾ç½®æ–‡ä»¶è¾“å…¥çš„æ–‡ä»¶
                    document.getElementById('jsonFileInput').files = files;
                    // è§¦å‘changeäº‹ä»¶ï¼Œå¯åŠ¨æ–‡ä»¶å¤„ç†
                    const event = new Event('change');
                    document.getElementById('jsonFileInput').dispatchEvent(event);
                }
            }
        });
    </script>
</body>
</html>